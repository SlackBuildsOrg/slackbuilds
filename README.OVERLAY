SLACKBUILDS-OVERLAY

slackbuilds-overlay is a local fork of SlackBuilds.org used to track
upstream cleanly while maintaining a small, intentional set of local
SlackBuild overrides.

The overlay exists to support local systems, Slackware-current usage,
and opinionated policies that are not suitable for upstream submission.


REPOSITORY MODEL

This repository follows a strict separation of roles:

- upstream/master
  Canonical SlackBuilds.org history (read-only).

- master
  Local fork of SlackBuilds.org.
  Contains permanent OVERLAY commits.
  Upstream changes are integrated via merge commits.
  Not safe as a base for upstream pull requests.

- add/*, update/*
  Temporary branches for upstream contributions.
  Always created from upstream/master.
  One package per branch.
  Deleted after merge.

- OVERLAY/
  Local SlackBuild overrides.
  Permanent and opinionated.
  Never submitted upstream.


OVERLAY SCOPE

A change belongs in OVERLAY if it is:

- Slackware-current specific
- Required for local systems only
- Opinionated or policy-driven
- Rejected or not desired upstream
- Experimental or long-term customization

OVERLAY is intentional divergence.


FORK SYNC

Once OVERLAY exists on master, fast-forward merges are no longer
possible.

To sync this fork with SlackBuilds.org upstream:

  git fetch upstream
  git checkout master
  git merge upstream/master
  git push origin master

This creates a merge commit and preserves all OVERLAY history.
No commits are rewritten.


UPSTREAM WORKFLOW

SlackBuilds.org distinguishes between updates to existing packages and
new package submissions. These follow different processes.


UPDATING EXISTING PACKAGES

Updates to packages already present in SlackBuilds.org may be submitted
via pull request.

Workflow:

  git fetch upstream
  git checkout -b update/pkgname-version upstream/master
  git commit -am "category/pkgname: short description"
  git push origin update/pkgname-version

After merge:
- delete the branch
- sync master using the Fork Sync procedure

NOTE: PR branches must always be created directly from upstream/master.
Do not branch from local master or overlay branches.


NEW PACKAGE SUBMISSIONS

New packages must not be submitted via pull request.

Rules:

- do not open a pull request
- do not add the package for upstream in this repository
- prepare and test the SlackBuild locally
- submit it using the official submission form:

  https://slackbuilds.org/submit/

Reviewer feedback is handled via email.


SAFETY RULES

Once OVERLAY exists on master:

- never rebase master
- never hard-reset master
- never force-push master
- never attempt fast-forward merges
- upstream updates are integrated via regular merges only

Pull request branches must never be created from master.

Cherry-pick is a repair tool, not a workflow.


VALIDATION

To verify that master only diverges via OVERLAY:

  git diff upstream/master..master --stat

Only OVERLAY/ and OVERLAY.README should appear.


PHILOSOPHY

Upstream stays clean.
Local systems stay functional.
Processes are respected.
Workflow stays boring.

OVERLAY is where reality lives.
upstream/master is the source of truth.

