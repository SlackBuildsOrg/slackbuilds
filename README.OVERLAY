SLACKBUILDS-OVERLAY

This repository is a local fork of SlackBuilds.org used to track upstream
cleanly while maintaining a small, intentional set of local SlackBuild
overrides (OVERLAY).

OVERLAY exists for Slackware-current usage, local policies, and changes
that are not suitable for upstream submission.


REPOSITORY MODEL

- upstream/master
  Canonical SlackBuilds.org history (read-only).

- master
  Local fork.
  Contains permanent OVERLAY commits.
  Synced from upstream via merge commits.
  Not safe as a base for upstream pull requests.

- add/*, update/*
  Temporary branches for upstream contributions.
  Always created from upstream/master.
  Deleted after merge.

- OVERLAY/
  Local-only SlackBuild overrides.
  Permanent and opinionated.
  Never submitted upstream.


WHEN TO USE OVERLAY

A change belongs in OVERLAY if it is:

- Slackware-current specific
- Required only for local systems
- Opinionated or policy-driven
- Rejected or not desired upstream
- Experimental or long-term customization

OVERLAY is intentional divergence.


WORKING WITH OVERLAY

All OVERLAY work is done on local master.

1. Switch to master:

   git checkout master

2. Sync with upstream (never reset):

   git fetch upstream
   git merge upstream/master

3. Create or modify files only inside OVERLAY/:

   OVERLAY/category/pkgname/

4. Test the SlackBuild locally.

5. Commit the OVERLAY change:

   git add OVERLAY/category/pkgname
   git commit -m "OVERLAY: customize pkgname for local use"

6. Push to your fork:

   git push origin master

OVERLAY commits are permanent and must never be submitted upstream.


UPSTREAM CONTRIBUTIONS

Pull requests must always start from upstream/master.

Updating an existing package:

  git fetch upstream
  git checkout -b update/pkgname-version upstream/master
  git commit -am "category/pkgname: short description"
  git push origin update/pkgname-version

Commit messages for upstream submissions must use the format:

  category/pkgname: short description

Example:

  system/TLP: update to 1.9.1

Branch names may follow the local convention:

  update/pkgname-version

Branch names are disposable and local-only; commit messages must follow
upstream style.


CI TESTING (OPTIONAL)

For contributors with CI access, builds can be triggered after opening a
pull request by adding a PR comment:

  @sbo-bot: build category/pkgname

Example:

  @sbo-bot: build system/xbattmon

This must be posted as a PR comment, not in the commit message or PR
description.


SAFETY RULES

Once OVERLAY exists on master:

- never rebase master
- never hard-reset master
- never force-push master
- never fast-forward merge upstream
- never branch from master for PRs

Only add/* and update/* branches may be used for upstream work.


VALIDATION

To confirm that master only diverges due to OVERLAY:

  git diff upstream/master..master --stat

Only OVERLAY/ and README.OVERLAY should appear.


PHILOSOPHY

Upstream stays clean.
Local systems stay functional.
Processes are respected.
Workflow stays boring.

OVERLAY is where reality lives.
upstream/master is the source of truth.

